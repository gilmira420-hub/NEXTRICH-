<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>NEXTRICH</title>
<style>
body{font-family:Arial;background:#111;color:#fff;margin:0}
.page{display:none;padding:15px}
.page.active{display:block}
input,button{width:100%;padding:10px;margin:5px 0}
button{background:#00c853;border:none;color:#000;font-weight:bold}
.card{background:#1c1c1c;padding:15px;margin:10px 0;border-radius:8px}
nav{display:flex;justify-content:space-around;background:#000;padding:10px}
nav button{width:auto;background:#222;color:#fff}
.admin{border:2px solid #ff9800}
</style>
</head>
<body>

<!-- AUTH -->
<div id="auth" class="page active">
  <h2>NEXTRICH</h2>
  <input id="login" placeholder="Логин">
  <input id="pass" type="password" placeholder="Пароль">
  <button onclick="loginUser()">Войти / Регистрация</button>
</div>

<!-- NAV -->
<nav id="nav" style="display:none">
  <button onclick="show('home')">Дом</button>
  <button onclick="show('elite')">ELITE</button>
  <button onclick="show('tasks')">Задачи</button>
  <button onclick="show('team')">Команда</button>
  <button onclick="show('me')">Мне</button>
</nav>

<!-- HOME -->
<div id="home" class="page">
  <h3>Добро пожаловать</h3>
  <p>Ваш баланс: <b id="bal">0</b> USDT</p>
</div>

<!-- ELITE -->
<div id="elite" class="page"></div>

<!-- TASKS -->
<div id="tasks" class="page">
  <h3>Задания</h3>
  <div id="taskList"></div>
</div>

<!-- TEAM -->
<div id="team" class="page">
  <h3>Команда</h3>
  <p>Ваша ссылка:</p>
  <input id="ref" readonly>
</div>

<!-- ME -->
<div id="me" class="page">
  <h3>Кабинет</h3>
  <p>Баланс: <b id="bal2">0</b> USDT</p>
</div>

<!-- ADMIN -->
<div id="admin" class="page admin">
  <h3>АДМИН-КАБИНЕТ</h3>

  <h4>Изменить баланс</h4>
  <input id="abUser" placeholder="Логин">
  <input id="abSum" type="number" placeholder="Баланс">
  <button onclick="setBalance()">Установить</button>

  <h4>Добавить задание</h4>
  <input id="tTitle" placeholder="Название">
  <input id="tLink" placeholder="YouTube ссылка">
  <input id="tReward" type="number" placeholder="Награда USDT">
  <button onclick="addTask()">Добавить задание</button>
</div>

<script>
let users = JSON.parse(localStorage.getItem('users')||'{}');
let tasks = JSON.parse(localStorage.getItem('tasks')||'[]');
let user = null;

function save(){
  localStorage.setItem('users',JSON.stringify(users));
  localStorage.setItem('tasks',JSON.stringify(tasks));
}

function loginUser(){
  const l=login.value.trim(), p=pass.value;
  if(!users[l]) users[l]={p,balance:0,done:[]};
  if(users[l].p!==p) return alert('Пароль неверный');
  user={u:l};
  auth.style.display='none';
  nav.style.display='flex';
  show('home');
  render();
}

function show(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(id==='elite') renderElite();
  if(id==='tasks') renderTasks();
  if(id==='admin' && user.u!=='admin1') show('home');
}

function render(){
  bal.textContent=users[user.u].balance;
  bal2.textContent=users[user.u].balance;
  ref.value=location.href+'?ref='+user.u;
  if(user.u==='admin1'){
    document.body.appendChild(admin);
    admin.classList.add('active');
  }
}

function renderElite(){
  elite.innerHTML='<h3>ELITE</h3>';
  const arr=[
    [10,3],[50,16],[200,68],[600,216],[1200,480],
    [2400,1104],[4800,2496],[9600,5760],[19200,13440],[38400,32640]
  ];
  arr.forEach((e,i)=>{
    elite.innerHTML+=`<div class="card">
    <b>ELITE ${i+1}</b><br>
    Депозит: ${e[0]} USDT<br>
    Доход: ${e[1]} USDT<br>
    <button>Активировать</button>
    </div>`;
  });
}

function addTask(){
  if(user.u!=='admin1') return;
  tasks.push({t:tTitle.value,l:tLink.value,r:+tReward.value});
  save();
  alert('Задание добавлено');
}

function renderTasks(){
  taskList.innerHTML='';
  tasks.forEach((t,i)=>{
    if(users[user.u].done.includes(i)) return;
    taskList.innerHTML+=`<div class="card">
    <b>${t.t}</b><br>
    <a href="${t.l}" target="_blank">Перейти</a><br>
    Награда: ${t.r} USDT<br>
    <button onclick="doneTask(${i})">Выполнено</button>
    </div>`;
  });
}

function doneTask(i){
  users[user.u].balance+=tasks[i].r;
  users[user.u].done.push(i);
  save();
  render();
  renderTasks();
}

function setBalance(){
  if(user.u!=='admin1') return;
  users[abUser.value].balance=+abSum.value;
  save();
  alert('Готово');
}
</script>
</body>
</html>
