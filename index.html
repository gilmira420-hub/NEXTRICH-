<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>NEXTRICH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0b1020;color:#fff;overflow:hidden}
header{padding:15px;text-align:center;background:#10183a;font-size:22px}
.card{background:#141a32;margin:12px;padding:15px;border-radius:14px}
input,select,button{width:100%;padding:10px;margin:6px 0;border-radius:10px;border:none}
button{background:#ffd000;font-weight:bold}
nav{position:fixed;bottom:0;left:0;right:0;display:flex;background:#ffd000}
nav div{flex:1;text-align:center;padding:12px;font-weight:bold}
.admin{display:none}
a{color:#6fd3ff}
.snow{position:fixed;top:-10px;color:white;font-size:18px;animation:fall linear infinite}
@keyframes fall{to{transform:translateY(110vh)}}
</style>
</head>

<body>

<header>üéÑ NEXTRICH ‚ùÑÔ∏è</header>

<div class="card">
<b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</b> <span id="user"></span><br>
<b>ELITE:</b> <span id="elite"></span><br>
<b>–ë–∞–ª–∞–Ω—Å:</b> <span id="balance">0</span> USDT
</div>

<div class="card admin" id="admin">
<h3>üëë –ê–¥–º–∏–Ω–∫–∞</h3>

<input id="targetUser" placeholder="–õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
<input id="changeAmount" type="number" placeholder="–°–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å">
<button onclick="changeBalance()">–ò–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>

<hr>

<input id="taskTitle" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è">
<input id="taskLink" placeholder="YouTube —Å—Å—ã–ª–∫–∞">
<select id="taskElite">
<option value="1">ELITE 1</option>
<option value="2">ELITE 2</option>
<option value="3">ELITE 3</option>
<option value="4">ELITE 4</option>
</select>
<input id="taskReward" type="number" placeholder="–ù–∞–≥—Ä–∞–¥–∞">
<button onclick="addTask()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
</div>

<div class="card">
<h3>üìã –ó–∞–¥–∞–Ω–∏—è</h3>
<div id="tasks">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á</div>
</div>

<div class="card">
<h3>üÜò Support</h3>
<a href="https://t.me/your_support_username" target="_blank">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
</div>

<nav>
<div>–î–æ–º</div>
<div>ELITE</div>
<div>–ó–∞–¥–∞—á–∏</div>
<div>–ú–Ω–µ</div>
<div>Support</div>
</nav>

<script>
// ‚ùÑÔ∏è –°–ù–ï–ñ–ò–ù–ö–ò
for(let i=0;i<40;i++){
 let s=document.createElement("div");
 s.className="snow";
 s.innerHTML="‚ùÑÔ∏è";
 s.style.left=Math.random()*100+"vw";
 s.style.animationDuration=3+Math.random()*5+"s";
 document.body.appendChild(s);
}

// üî• FIREBASE (–ó–ê–ú–ï–ù–ò!)
firebase.initializeApp({
 apiKey: "API_KEY",
 authDomain: "PROJECT.firebaseapp.com",
 projectId: "PROJECT"
});
const db=firebase.firestore();

// ‚öôÔ∏è –ê–í–¢–û–í–•–û–î (–î–õ–Ø –¢–ï–°–¢–ê)
let username=localStorage.getItem("user");
if(!username){
 username=prompt("–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω");
 localStorage.setItem("user",username);
}
document.getElementById("user").innerText=username;

const isAdmin=username==="admin";
if(isAdmin) document.getElementById("admin").style.display="block";

// üîπ –ó–ê–ì–†–£–ó–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
const userRef=db.collection("users").doc(username);
userRef.get().then(d=>{
 if(!d.exists){
  userRef.set({elite:1,balance:0});
 }
});

// üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–•
userRef.onSnapshot(d=>{
 document.getElementById("elite").innerText=d.data().elite;
 document.getElementById("balance").innerText=d.data().balance;
});

// üëë –ò–ó–ú–ï–ù–ò–¢–¨ –ë–ê–õ–ê–ù–°
function changeBalance(){
 const u=targetUser.value;
 const amt=Number(changeAmount.value);
 db.collection("users").doc(u).get().then(d=>{
  if(!d.exists){alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω");return;}
  db.collection("users").doc(u).update({
   balance:d.data().balance+amt
  });
  alert("–ë–∞–ª–∞–Ω—Å –∏–∑–º–µ–Ω—ë–Ω");
 });
}

// üßæ –î–û–ë–ê–í–ò–¢–¨ –ó–ê–î–ê–ù–ò–ï
const limits={1:3,2:10,3:68,4:150};
function addTask(){
 const elite=Number(taskElite.value);
 const reward=Number(taskReward.value);
 if(reward>limits[elite]){alert("–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è –Ω–∞–≥—Ä–∞–¥–∞");return;}
 db.collection("tasks").add({
  title:taskTitle.value,
  link:taskLink.value,
  reward,
  elite
 });
 alert("–ó–∞–¥–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ");
}

// üìã –ó–ê–î–ê–ù–ò–Ø –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
userRef.get().then(u=>{
 const e=u.data().elite;
 db.collection("tasks").where("elite","<=",e)
 .onSnapshot(s=>{
  const box=document.getElementById("tasks");
  box.innerHTML="";
  if(s.empty){box.innerText="–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á";return;}
  s.forEach(doc=>{
   const t=doc.data();
   box.innerHTML+=`
   <div class="card">
   <b>${t.title}</b><br>
   <a href="${t.link}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å</a><br>
   –ù–∞–≥—Ä–∞–¥–∞: ${t.reward} USDT
   <button onclick="complete(${t.reward})">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>
   </div>`;
  });
 });
});

// ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ò–ï
function complete(reward){
 userRef.get().then(d=>{
  userRef.update({balance:d.data().balance+reward});
  alert("–ù–∞—á–∏—Å–ª–µ–Ω–æ "+reward+" USDT");
 });
}
</script>

</body>
</html>
