<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>NEXTRICH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;background:#0f1115;color:#fff;font-family:Arial}
nav{display:flex;gap:8px;justify-content:center;background:#1c1f2a;padding:10px}
nav button{background:#2b2f3a;color:#fff;border:none;padding:10px 12px;border-radius:10px}
.page{display:none;padding:15px}
.page.active{display:block}
.card{background:#1c1f2a;padding:15px;border-radius:14px;margin-bottom:12px}
input,select,button{width:100%;padding:10px;border-radius:10px;border:none;margin-bottom:8px}
button{background:#4f7cff;color:#fff;font-size:15px}
.admin{border:1px solid #ffb300}
small{opacity:.7}
</style>
</head>
<body>

<!-- AUTH -->
<div id="auth" class="page active">
  <div class="card">
    <h2>NEXTRICH</h2>
    <input id="login" placeholder="Логин">
    <input id="pass" type="password" placeholder="Пароль">
    <button onclick="enter()">Войти / Регистрация</button>
    <small>Платформа заданий и вознаграждений</small>
  </div>
</div>

<!-- NAV -->
<nav id="nav" style="display:none">
  <button onclick="openPage('home')">Дом</button>
  <button onclick="openPage('elite')">ELITE</button>
  <button onclick="openPage('tasks')">Задачи</button>
  <button onclick="openPage('team')">Команда</button>
  <button onclick="openPage('me')">Мне</button>
  <button onclick="logout()">Выход</button>
</nav>

<!-- HOME -->
<div id="home" class="page">
  <div class="card">
    <h3>Баланс: <span id="bal">0</span> USDT</h3>
    <div>Ваш ELITE: <span id="eliteLvl">—</span></div>
  </div>
</div>

<!-- ELITE -->
<div id="elite" class="page">
  <div id="eliteList"></div>
</div>

<!-- TASKS -->
<div id="tasks" class="page">
  <div id="taskList"></div>

  <div id="addTask" class="card admin" style="display:none">
    <h4>Добавить задание (admin)</h4>
    <input id="tLink" placeholder="YouTube ссылка">
    <input id="tReward" type="number" placeholder="Награда">
    <button onclick="addTask()">Добавить</button>
  </div>
</div>

<!-- TEAM -->
<div id="team" class="page">
  <div class="card">
    <div>Ваша реферальная ссылка:</div>
    <small id="refLink"></small>
  </div>
</div>

<!-- ME -->
<div id="me" class="page">
  <div class="card">
    <h4>Пополнение</h4>
    <small>
USDT Polygon: 0x386a41769648b8daca0c63271dc533ea787d67ba<br>
USDT ERC20: 0x386a41769648b8daca0c63271dc533ea787d67ba<br>
USDT TRC20: TRSEFWAFve44VnGkpkYDvnDKCWXbGo3fHu<br>
LTC: Lf73TtKAVHGHuYMv5VjXbMVe67YY4ssLN1
    </small>
  </div>

  <div class="card">
    <h4>Я оплатил</h4>
    <select id="pNet">
      <option>USDT Polygon</option>
      <option>USDT TRC20</option>
      <option>USDT ERC20</option>
      <option>LTC</option>
    </select>
    <input id="pSum" type="number" placeholder="Сумма">
    <input id="pTx" placeholder="TxID / комментарий">
    <button onclick="paid()">Отправить заявку</button>
  </div>
</div>

<!-- ADMIN -->
<div id="adminPays" class="page admin">
  <div class="card">
    <h3>Админ — заявки на пополнение</h3>
    <div id="payList"></div>
  </div>
</div>

<script>
let users = JSON.parse(localStorage.getItem('users')||'{}');
let user = null;
let pays = JSON.parse(localStorage.getItem('pays')||'[]');
let tasks = JSON.parse(localStorage.getItem('tasks')||'[]');

const elites=[
{l:1,d:10,p:3},{l:2,d:50,p:16},{l:3,d:200,p:68},
{l:4,d:600,p:216},{l:5,d:1200,p:480},{l:6,d:2400,p:1104},
{l:7,d:4800,p:2496},{l:8,d:9600,p:5760},
{l:9,d:19200,p:13440},{l:10,d:38400,p:32640}
];

function enter(){
  if(!login.value || !pass.value){
    alert('Введите логин и пароль'); return;
  }

  if(login.value==='admin1' && pass.value!=='admin1'){
    alert('Неверный пароль администратора'); return;
  }

  if(!users[login.value]){
    users[login.value]={u:login.value,balance:0,elite:0};
  }

  user=users[login.value];
  localStorage.setItem('users',JSON.stringify(users));
  localStorage.setItem('user',JSON.stringify(user));
  init();
}

function init(){
  auth.style.display='none';
  nav.style.display='flex';
  openPage('home');
  bal.innerText=user.balance;
  eliteLvl.innerText=user.elite||'—';
  renderElite();
  renderTasks();
  refLink.innerText=location.href.split('?')[0]+'?ref='+user.u;

  if(user.u==='admin1'){
    addTask.style.display='block';
    openPage('adminPays');
    renderPays();
  }
}

function openPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function renderElite(){
  eliteList.innerHTML='';
  elites.forEach(e=>{
    eliteList.innerHTML+=`
    <div class="card">
      <b>ELITE ${e.l}</b><br>
      Депозит ${e.d} USDT<br>
      Доход ${e.p} USDT<br><br>
      <button onclick="buyElite(${e.l})">Активировать</button>
    </div>`;
  });
}

function buyElite(l){
  user.elite=l;
  users[user.u]=user;
  localStorage.setItem('users',JSON.stringify(users));
  openPage('me');
}

function paid(){
  pays.push({u:user.u,sum:+pSum.value,net:pNet.value,tx:pTx.value});
  localStorage.setItem('pays',JSON.stringify(pays));
  alert('Заявка отправлена');
}

function renderPays(){
  payList.innerHTML='';
  pays.forEach((p,i)=>{
    payList.innerHTML+=`
    <div class="card">
      ${p.u} — ${p.sum} (${p.net})<br>
      <button onclick="approve(${i})">Подтвердить</button>
    </div>`;
  });
}

function approve(i){
  let p=pays[i];
  users[p.u].balance+=p.sum;
  localStorage.setItem('users',JSON.stringify(users));
  pays.splice(i,1);
  localStorage.setItem('pays',JSON.stringify(pays));
  renderPays();
}

function addTask(){
  tasks.push({link:tLink.value,rew:+tReward.value});
  localStorage.setItem('tasks',JSON.stringify(tasks));
  renderTasks();
}

function renderTasks(){
  taskList.innerHTML='';
  tasks.forEach((t,i)=>{
    taskList.innerHTML+=`
    <div class="card">
      <a href="${t.link}" target="_blank">YouTube</a><br>
      Награда ${t.rew} USDT<br>
      <button onclick="doneTask(${i})">Выполнено</button>
    </div>`;
  });
}

function doneTask(i){
  user.balance+=tasks[i].rew;
  users[user.u]=user;
  localStorage.setItem('users',JSON.stringify(users));
  bal.innerText=user.balance;
  alert('Начислено');
}

function logout(){location.reload();}

if(localStorage.getItem('user')){
  user=JSON.parse(localStorage.getItem('user'));
  init();
}
</script>

</body>
</html>
